package malware_gotchi;

public class Pet {

    String name;
    private double happy;
    int batteries = 0;
    FileHandler file;

    Pet(String save){
    	this.file = new FileHandler(save);
    	this.batteries = file.getBatteries();
    	this.name = file.getName();
    
    }

    public void feed(){
    if (this.batteries >= 5){
        this.batteries -= 5;
        System.out.println("You used 5 batteries and fed " + this.name + "! Go you!" + '\n');
        file.setBatteries(batteries);
        file.setLastFed(System.currentTimeMillis());
        this.waiting();
        }
    else{
        System.out.println("You do not have enough batteries, you can win some more by playing a game." + '\n');
        this.waiting();
    }
    }
    public void game(){
        this.batteries += 3;
        System.out.println("You 'played' a game and found 3 batteries." + '\n');
        file.setBatteries(batteries);
        this.waiting();
    }

    public void pet(){
        System.out.println("You pet " + this.name + "! While the happiness is temporary, you can feel its warmth as it is comforted!"+ '\n');
        this.waiting();
    }

    public void stats(){
    	calculateHappiness();
    	long tDelta = (System.currentTimeMillis()-file.getLastFed())/1000;
        System.out.println("You last fed " + this.name + " "
    	+ Long.toString(tDelta)+" seconds ago." + '\n' + 
        this.name + " is " + String.format("%.2f", this.happy) + " happy." + '\n');
        this.waiting();
    }
    public void waiting(){
        try {
            Thread.sleep(500); 
          } catch (Exception e) {
              e.printStackTrace();
          }
    }
    private void calculateHappiness() {
    	this.happy = 36 - ((double)(System.currentTimeMillis()-file.getLastFed()))/3600000;
    }



}

